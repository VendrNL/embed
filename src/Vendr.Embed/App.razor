<MudThemeProvider Theme="@_theme" @ref="_themeProvider">
    <MudDialogProvider />
    <MudSnackbarProvider />

    <CascadingValue Value="this" IsFixed="true">
        <Router AppAssembly="typeof(App).Assembly">
            <Found Context="routeData">
                <RouteView RouteData="routeData" DefaultLayout="typeof(MainLayout)" />
                <FocusOnNavigate RouteData="routeData" Selector="h1" />
            </Found>
            <NotFound>
                <LayoutView Layout="typeof(MainLayout)">
                    <MudContainer Class="py-8">
                        <MudAlert Severity="Severity.Error" Elevation="2">
                            Pagina niet gevonden.
                        </MudAlert>
                    </MudContainer>
                </LayoutView>
            </NotFound>
        </Router>
    </CascadingValue>
</MudThemeProvider>

@code {
    private MudThemeProvider? _themeProvider;
    private MudTheme _theme = new();

    public async Task SetPaletteAsync(Palette palette)
    {
        if (_themeProvider is null) return;
        _theme = _theme with { Palette = palette };
        await _themeProvider.ApplyTheme(_theme);
    }
}
